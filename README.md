<!-- # Link to solve OtpNode IOException -->
<!-- https://stackoverflow.com/questions/7662342/otpnode-triggering-ioexception -->

# Distributed Systems and Middleware Technologies project

Welcome to the repository for our Distributed Systems and Middleware Technologies project. This repository encompasses a comprehensive collection of materials, scripts, and codebases developed as part of our coursework.

### Prerequisites
- **Java JDK 17**: Ensure JDK 17 is installed on your system.
- **Maven**: Maven is used for build and dependency management.
- **Erlang/OTP**: Necessary for running Erlang nodes.
- **Rebar3**: Used for compiling Erlang modules and managing Erlang dependencies.
- **GlassFish 7**: For deploying the Java nodes. GlassFish is used due to its support for the latest Java EE features.
- **Tomcat 16**: For deploying the web application. Tomcat provides a reliable environment for running Java web applications.
- **Redis**: Used as Database

## Installation and Configuration

#### 1. Clone the Repository:

``` Bash
git clone https://github.com/GiuseppeSoriano/DSMT_project.git
```

#### 2. Build the Java Components with Maven:

Ensure Maven is installed and from the Java source directory, run:

``` Bash
mvn clean install
```

This will compile the Java code and create an executable JAR file.

#### 3. Compile Erlang Modules with Rebar3:

Make sure rebar3 is installed. In the directory containing the Erlang modules, run:

``` Bash
rebar3 compile
```

This will compile all Erlang modules.

#### 4. Set Up Redis:

Install Redis on your server. This can typically be done through your package manager. For example, on Ubuntu:

``` Bash
sudo apt-get install redis-server
```

Ensure that Redis is running and configured to your needs. You might want to adjust the default configuration to improve performance or security, depending on your project requirements.

#### 5. Deploy Java Nodes on GlassFish 7:

Deploy the compiled Java nodes (`Server` and `DatabaseManager`) to GlassFish Server. You can use the GlassFish admin console.

#### 6. Deploy the Web Application on Tomcat 16:

Place the WAR file generated by Maven into the webapps directory of your Tomcat server installation or use the Tomcat Web Application Manager to deploy it.

#### 7. Configure Network Settings:

Update the node names and cookie values in both the Java and Erlang configuration files to match your network settings. Ensure the nodes are configured to communicate over your network.




The Redis Database is installed in this node

URL to make GET request: http://10.2.1.73:8080/database/stock-api?ticker=TSLA&date=1

### Node 10.2.1.94

`Data Producer` is deployed on GlassFish

### Node 10.2.1.95

`Erlang node` started in a screen

### Node 10.2.1.72

`Web App` is deployed on Tomcat

## Usage in exam deployment

This section describes how to interact with the system components deployed across different nodes in the exam setup. Each component serves a specific role within the architecture.

### 1. Node 10.2.1.73

`Database Manager`: This component is deployed on GlassFish and manages interactions with the stock database.

`Redis Database`: Installed on this node to handle caching and session storage to enhance performance.
Accessing the Database Manager:
To query stock information, such as Tesla's stock on a specific date, make a GET request to:
``` bash
http://10.2.1.73:8080/database/stock-api?ticker=TSLA&date=1
```
This URL fetches stock data from the Database Manager by querying the Redis cache or the underlying database if needed.

### 2. Node 10.2.1.94
`Data Producer`: Deployed on GlassFish, this component is responsible for producing and sending data to other system components. It acts as a middleware that processes data requests and manages data flow within the network.

### 3. Node 10.2.1.95

`Erlang Node`: This node runs an Erlang server that interacts with other Java-based nodes. The server is started within a screen session, allowing it to continue running independently of the terminal session.

To interact with the Erlang node, connect to the server using SSH and attach to the screen session where the node is running.

### 4. Node 10.2.1.72

`Web App`: Deployed on Tomcat, this component serves the user interface for the system.

Accessing the Web Application:
To access the web application, visit the following URL in a web browser:
``` Bash
http://10.2.1.72:8084
```
This link will direct you to the home page of the web application, where you can interact with various functionalities provided by the system.

## Usage in custom deployment

### Starting the System

#### Run the Erlang Node:

Start the Erlang node using rebar3:

``` Bash
rebar3 shell --name cowboy_bridge@<ip_address> --setcookie mycookie
```

#### Start the Java Application:
Launch the Java application on GlassFish that initiates the Java nodes.

#### Interacting with the Web Interface
Access the webapp according to the deployment on Tomcat